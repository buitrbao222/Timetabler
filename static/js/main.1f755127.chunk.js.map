{"version":3,"sources":["wdyr.js","workers/allTeachersGetter.ts","contexts/Data.tsx","components/DataInput/Form/MaxBreaksInput.tsx","components/DataInput/Form/MaxPeriodsInput.tsx","components/DataInput/Form/MinPeriodsInput.tsx","types/TypeGuards.ts","components/DataInput/Form/SubjectsInput.tsx","components/DataInput/Form/TeachersSelect.tsx","components/DataInput/Form/WeekInput.tsx","components/DataInput/Form/index.tsx","workers/timetableBuilder.ts","components/DataInput/SubmitButton.tsx","components/DataInput/Title.tsx","components/DataInput/index.tsx","components/Timetables/Timetable.tsx","components/Timetables/index.tsx","components/App/index.tsx","index.tsx"],"names":["process","env","NODE_ENV","React","lazy","whyDidYouRender","trackAllPureComponents","subjects","teachers","classes","sessions","teacher","includes","push","DataContext","createContext","undefined","DataProvider","children","useState","setSubjects","Array","map","fill","week","setWeek","allTeachers","setAllTeachers","selectedTeachers","setSelectedTeachers","maxPeriods","setMaxPeriods","minPeriods","setMinPeriods","maxBreaks","setMaxBreaks","timetables","setTimetables","useWorker","allTeachersGetter","getAllTeachers","useEffect","a","updateTeachers","Provider","value","useData","useContext","TextField","fullWidth","inputProps","min","max","label","type","variant","onChange","event","target","helperText","error","MinPeriodsInput","isNumber","x","isString","isSession","obj","day","start","length","room","isClass","group","empty","arr","isArray","areSessions","isSubject","subjectId","subjectName","credits","areClasses","Button","component","hidden","accept","fileEvent","files","file","endsWith","reader","FileReader","onload","readEvent","result","newSubjects","JSON","parse","areSubjects","console","log","readAsText","Input","params","Icon","fontSize","CheckedIcon","OptionCheckbox","styled","Checkbox","Option","option","state","Fragment","checked","selected","checkedIcon","icon","Autocomplete","disableCloseOnSelect","multiple","id","noOptionsText","options","renderInput","renderOption","_event","Table","div","Row","Cell","ScrollbarWrap","Scrollbars","mouseDown","setMouseDown","checkValue","setCheckValue","updateWeek","period","newValue","newWeek","stringify","document","body","onmousedown","onmouseup","_","i","key","j","onMouseDown","handleMouseDown","onMouseOver","theme","createMuiTheme","Grid","spacing","GridItem","cellSize","SubjectsInput","TeachersSelect","WeekInput","MaxPeriodsInput","MaxBreaksInput","myWeek","timetable","classAvailable","checkClassWeek","pushClass","clazz","backtrack","pop","periods","breaks","previous","Math","isGood","LoadingWrapper","LoadingIcon","CircularProgress","attrs","props","halfsize","size","closeDialog","timetableBuilder","buildTimetables","status","color","disabled","WORKER_STATUS","RUNNING","onClick","CloseButton","IconButton","palette","grey","Typography","open","setOpen","Dialog","scroll","onClose","DialogTitle","disableTypography","Title","DialogContent","dividers","DialogActions","SubmitButton","table","td","initialData","index","cellData","setCellData","newCells","forEach","row","data","rowSpan","PrevIcon","ChevronLeftIcon","NextIcon","ChevronRightIcon","Container","setIndex","Timetable","Centered","DataInput","Timetables","ReactDOM","render","CssBaseline","App","getElementById"],"mappings":"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","file":"static/js/main.1f755127.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport process from 'process';\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  const whyDidYouRender = React.lazy(() =>\r\n    import('@welldone-software/why-did-you-render')\r\n  );\r\n  whyDidYouRender(React, {\r\n    trackAllPureComponents: true,\r\n  });\r\n}\r\n","import { Subject } from 'types/Subject';\r\n\r\nexport default function (subjects: Subject[]): string[] {\r\n  let teachers: string[] = [];\r\n\r\n  for (let { classes } of subjects) {\r\n    for (let { sessions } of classes) {\r\n      for (let { teacher } of sessions) {\r\n        if (!teachers.includes(teacher)) {\r\n          teachers.push(teacher);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return teachers;\r\n}\r\n","import { useWorker } from '@koale/useworker';\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { SetState } from 'types/SetState';\r\nimport { Subject } from 'types/Subject';\r\nimport { Timetable } from 'types/Timetable';\r\nimport { Week } from 'types/Week';\r\nimport allTeachersGetter from 'workers/allTeachersGetter';\r\n\r\ntype ContextType = {\r\n  subjects: Subject[];\r\n  week: Week;\r\n  allTeachers: string[];\r\n  selectedTeachers: string[];\r\n  maxPeriods: number;\r\n  minPeriods: number;\r\n  maxBreaks: number;\r\n  timetables: Timetable[];\r\n\r\n  setSubjects: SetState<Subject[]>;\r\n  setSelectedTeachers: SetState<string[]>;\r\n  setMaxPeriods: SetState<number>;\r\n  setMinPeriods: SetState<number>;\r\n  setMaxBreaks: SetState<number>;\r\n  setTimetables: SetState<Timetable[]>;\r\n  setWeek: SetState<Week>;\r\n};\r\n\r\nconst DataContext = createContext<ContextType | undefined>(undefined);\r\n\r\ntype Props = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport function DataProvider({ children }: Props) {\r\n  const [subjects, setSubjects] = useState<Subject[]>([]);\r\n\r\n  const [week, setWeek] = useState<Week>(\r\n    [...Array(13)].map(() => Array(6).fill(0))\r\n  );\r\n\r\n  const [allTeachers, setAllTeachers] = useState<string[]>([]);\r\n\r\n  const [selectedTeachers, setSelectedTeachers] = useState<string[]>([]);\r\n\r\n  const [maxPeriods, setMaxPeriods] = useState<number>(13);\r\n\r\n  const [minPeriods, setMinPeriods] = useState<number>(0);\r\n\r\n  const [maxBreaks, setMaxBreaks] = useState<number>(0);\r\n\r\n  const [timetables, setTimetables] = useState<Timetable[]>([]);\r\n\r\n  const [getAllTeachers] = useWorker(allTeachersGetter);\r\n\r\n  useEffect(() => {\r\n    // setAllTeachers(\r\n    //   subjects.reduce((teachers, { classes }) => {\r\n    //     classes.forEach(({ sessions }) => {\r\n    //       sessions.forEach(\r\n    //         ({ teacher }) =>\r\n    //           !teachers.includes(teacher) && teachers.push(teacher)\r\n    //       );\r\n    //     });\r\n    //     return teachers;\r\n    //   }, [] as string[])\r\n    // );\r\n\r\n    async function updateTeachers() {\r\n      const allTeachers = await getAllTeachers(subjects);\r\n\r\n      setAllTeachers(allTeachers);\r\n      setSelectedTeachers([]);\r\n    }\r\n\r\n    updateTeachers();\r\n  }, [getAllTeachers, subjects]);\r\n\r\n  return (\r\n    <DataContext.Provider\r\n      value={{\r\n        subjects,\r\n        week,\r\n        allTeachers,\r\n        maxPeriods,\r\n        minPeriods,\r\n        maxBreaks,\r\n        selectedTeachers,\r\n        timetables,\r\n        setSubjects,\r\n        setMaxPeriods,\r\n        setMinPeriods,\r\n        setMaxBreaks,\r\n        setSelectedTeachers,\r\n        setWeek,\r\n        setTimetables,\r\n      }}\r\n    >\r\n      {children}\r\n    </DataContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useData = () => useContext(DataContext) as ContextType;\r\n","import React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\nimport { useData } from 'contexts/Data';\r\n\r\nexport default function () {\r\n  const { maxBreaks, setMaxBreaks } = useData();\r\n\r\n  function handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setMaxBreaks(+event.target.value);\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      inputProps={{\r\n        min: 0,\r\n        max: 11,\r\n      }}\r\n      label=\"Max breaks\"\r\n      type=\"number\"\r\n      value={maxBreaks}\r\n      variant=\"outlined\"\r\n      onChange={handleChange}\r\n      // helperText={'test'}\r\n      // error={true}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\nimport { useData } from 'contexts/Data';\r\n\r\nconst inputProps = {\r\n  min: 0,\r\n  max: 13,\r\n};\r\n\r\nexport default function () {\r\n  const { minPeriods, maxPeriods, setMaxPeriods } = useData();\r\n\r\n  function handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setMaxPeriods(+event.target.value);\r\n  }\r\n\r\n  const helperText =\r\n    maxPeriods < minPeriods\r\n      ? 'Max periods must be bigger than or equal to Min periods'\r\n      : '';\r\n\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      error={maxPeriods < minPeriods}\r\n      helperText={helperText}\r\n      inputProps={inputProps}\r\n      label=\"Max periods per day\"\r\n      type=\"number\"\r\n      value={maxPeriods}\r\n      variant=\"outlined\"\r\n      onChange={handleChange}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\nimport { useData } from 'contexts/Data';\r\n\r\nconst inputProps = { min: 0, max: 13 };\r\n\r\nexport default function MinPeriodsInput() {\r\n  const { maxPeriods, minPeriods, setMinPeriods } = useData();\r\n\r\n  function handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setMinPeriods(+event.target.value);\r\n  }\r\n\r\n  const helperText =\r\n    maxPeriods < minPeriods\r\n      ? 'Min periods must be smaller than or equal to Max periods'\r\n      : '';\r\n\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      error={maxPeriods < minPeriods}\r\n      helperText={helperText}\r\n      inputProps={inputProps}\r\n      label=\"Min periods per day\"\r\n      type=\"number\"\r\n      value={minPeriods}\r\n      variant=\"outlined\"\r\n      onChange={handleChange}\r\n    />\r\n  );\r\n}\r\n","import { Session } from 'types/Session';\r\nimport { Class } from 'types/Class';\r\nimport { Subject } from 'types/Subject';\r\n\r\nexport function isNumber(x: any): x is number {\r\n  return typeof x === 'number';\r\n}\r\n\r\nexport function isString(x: any): x is string {\r\n  return typeof x === 'string';\r\n}\r\n\r\nexport function isSession(obj: any): obj is Session {\r\n  const { day, start, length, room, teacher } = obj as Session;\r\n\r\n  return (\r\n    isNumber(day) &&\r\n    isNumber(start) &&\r\n    isNumber(length) &&\r\n    isString(room) &&\r\n    isString(teacher)\r\n  );\r\n}\r\n\r\nexport function areSessions(arr: any): arr is Session[] {\r\n  if (!Array.isArray(arr)) {\r\n    return false;\r\n  }\r\n\r\n  for (const session of arr as Session[]) {\r\n    if (!isSession(session)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nexport function isClass(obj: any): obj is Class {\r\n  const { group, max, empty, sessions } = obj as Class;\r\n\r\n  return (\r\n    isString(group) && isNumber(max) && isNumber(empty) && areSessions(sessions)\r\n  );\r\n}\r\n\r\nexport function areClasses(arr: any): arr is Class[] {\r\n  if (!Array.isArray(arr)) {\r\n    return false;\r\n  }\r\n\r\n  for (const clazz of arr as Class[]) {\r\n    if (!isClass(clazz)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nexport function isSubject(obj: any): obj is Subject {\r\n  const { subjectId, subjectName, credits, classes } = obj as Subject;\r\n\r\n  return (\r\n    isString(subjectId) &&\r\n    isString(subjectName) &&\r\n    isNumber(credits) &&\r\n    areClasses(classes)\r\n  );\r\n}\r\n\r\nexport function areSubjects(arr: any): arr is Subject[] {\r\n  if (!Array.isArray(arr)) {\r\n    return false;\r\n  }\r\n\r\n  for (const subject of arr as Class[]) {\r\n    if (!isSubject(subject)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n","import { Button } from '@material-ui/core';\r\nimport { useData } from 'contexts/Data';\r\nimport React from 'react';\r\nimport { Subject } from 'types/Subject';\r\nimport { areSubjects } from 'types/TypeGuards';\r\n\r\nexport default function () {\r\n  const { setSubjects } = useData();\r\n\r\n  function readFile(fileEvent: React.ChangeEvent<HTMLInputElement>) {\r\n    if (!fileEvent.target.files) return;\r\n\r\n    const file: File = fileEvent.target.files[0];\r\n\r\n    if (!file.type.endsWith('json')) {\r\n      return;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = readEvent => {\r\n      if (readEvent.target?.result) {\r\n        const newSubjects: Subject[] = JSON.parse(\r\n          readEvent.target.result as string\r\n        );\r\n\r\n        areSubjects(newSubjects)\r\n          ? setSubjects(newSubjects)\r\n          : console.log('Invalid file data.');\r\n      }\r\n    };\r\n\r\n    reader.readAsText(file);\r\n\r\n    // Reset file path, same file can fire event multiple times\r\n    fileEvent.target.value = '';\r\n  }\r\n\r\n  return (\r\n    <Button component=\"label\" variant=\"outlined\">\r\n      Input subjects\r\n      <input\r\n        hidden\r\n        accept=\".json\"\r\n        type=\"file\"\r\n        value={undefined}\r\n        onChange={readFile}\r\n      />\r\n    </Button>\r\n  );\r\n}\r\n","import { Checkbox, TextField } from '@material-ui/core';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport { Autocomplete, AutocompleteRenderOptionState } from '@material-ui/lab';\r\nimport { useData } from 'contexts/Data';\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Input = (params: any) => (\r\n  <TextField {...params} label=\"Teachers to avoid\" variant=\"outlined\" />\r\n);\r\n\r\nconst Icon = <CheckBoxOutlineBlankIcon fontSize=\"small\" />;\r\n\r\nconst CheckedIcon = <CheckBoxIcon fontSize=\"small\" />;\r\n\r\nconst OptionCheckbox = styled(Checkbox)`\r\n  margin-right: 8px;\r\n`;\r\n\r\nconst Option = (option: string, state: AutocompleteRenderOptionState) => (\r\n  <React.Fragment>\r\n    <OptionCheckbox\r\n      checked={state.selected}\r\n      checkedIcon={CheckedIcon}\r\n      icon={Icon}\r\n    />\r\n    {option}\r\n  </React.Fragment>\r\n);\r\n\r\nexport default function () {\r\n  const { allTeachers, selectedTeachers, setSelectedTeachers } = useData();\r\n\r\n  function handleChange(_event: unknown, value: string[]) {\r\n    setSelectedTeachers(value);\r\n  }\r\n\r\n  return (\r\n    <Autocomplete\r\n      disableCloseOnSelect\r\n      fullWidth\r\n      multiple\r\n      id=\"teachers-select\"\r\n      noOptionsText=\"Subjects input required\"\r\n      options={allTeachers}\r\n      renderInput={Input}\r\n      renderOption={Option}\r\n      value={selectedTeachers}\r\n      onChange={handleChange}\r\n    />\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Scrollbars from 'react-custom-scrollbars';\r\nimport { useData } from 'contexts/Data';\r\nimport styled from 'styled-components';\r\nimport { Week } from 'types/Week';\r\n\r\nconst Table = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: solid black;\r\n  border-width: 1px 0 0 1px;\r\n  width: fit-content;\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst cellSize = 48;\r\n\r\nexport const tableWidth = cellSize * 7 + 1;\r\n\r\nconst Cell = styled.div`\r\n  width: ${cellSize}px;\r\n  height: ${cellSize}px;\r\n  display: flex;\r\n  border: solid black;\r\n  border-width: 0 1px 1px 0;\r\n  align-items: center;\r\n  justify-content: center;\r\n  user-select: none;\r\n  text-align: center;\r\n`;\r\n\r\nconst ScrollbarWrap = styled(Scrollbars)`\r\n  height: ${7 * cellSize}px !important;\r\n`;\r\n\r\nexport default function () {\r\n  const [mouseDown, setMouseDown] = useState(false);\r\n\r\n  const [checkValue, setCheckValue] = useState<0 | 1>(1);\r\n\r\n  const { week, setWeek } = useData();\r\n\r\n  function updateWeek(period: number, day: number, newValue: 0 | 1) {\r\n    const newWeek: Week = JSON.parse(JSON.stringify(week));\r\n    newWeek[period][day] = newValue;\r\n    setWeek(newWeek);\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.body.onmousedown = () => setMouseDown(true);\r\n    document.body.onmouseup = () => setMouseDown(false);\r\n\r\n    return () => {\r\n      document.body.onmousedown = null;\r\n      document.body.onmouseup = null;\r\n    };\r\n  }, []);\r\n\r\n  function handleMouseDown(period: number, day: number) {\r\n    const newValue = (1 - week[period][day]) as 0 | 1;\r\n\r\n    setCheckValue(newValue);\r\n\r\n    updateWeek(period, day, newValue);\r\n  }\r\n\r\n  function handleMouseOver(period: number, day: number) {\r\n    mouseDown && updateWeek(period, day, checkValue);\r\n  }\r\n\r\n  return (\r\n    <Table>\r\n      <Row>\r\n        {/* Top left empty cell */}\r\n        <Cell />\r\n\r\n        {/* Day labels */}\r\n        {[...Array(6)].map((_, i) => (\r\n          <Cell key={i}>\r\n            Thứ <br /> {i + 2}\r\n          </Cell>\r\n        ))}\r\n      </Row>\r\n\r\n      <ScrollbarWrap>\r\n        {[...Array(13)].map((_, i) => (\r\n          <Row key={i}>\r\n            {/* Period label */}\r\n            <Cell>\r\n              Tiết <br /> {i + 1}\r\n            </Cell>\r\n\r\n            {/* Period checkbox cells, shows X when checked */}\r\n            {[...Array(6)].map((_, j) => (\r\n              <Cell\r\n                key={j}\r\n                onMouseDown={() => handleMouseDown(i, j)}\r\n                onMouseOver={() => handleMouseOver(i, j)}\r\n              >\r\n                {!!week[i][j] && '❌'}\r\n              </Cell>\r\n            ))}\r\n          </Row>\r\n        ))}\r\n      </ScrollbarWrap>\r\n    </Table>\r\n  );\r\n}\r\n","import { createMuiTheme } from '@material-ui/core';\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\nimport MaxBreaksInput from './MaxBreaksInput';\r\nimport MaxPeriodsInput from './MaxPeriodsInput';\r\nimport MinPeriodsInput from './MinPeriodsInput';\r\nimport SubjectsInput from './SubjectsInput';\r\nimport TeachersSelect from './TeachersSelect';\r\nimport WeekInput, { tableWidth } from './WeekInput';\r\n\r\nconst theme = createMuiTheme();\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  row-gap: ${theme.spacing(3)}px;\r\n`;\r\n\r\nconst GridItem = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: ${tableWidth}px;\r\n`;\r\n\r\nexport default function () {\r\n  return (\r\n    <Grid>\r\n      <GridItem>\r\n        <SubjectsInput />\r\n      </GridItem>\r\n\r\n      <GridItem>\r\n        <TeachersSelect />\r\n      </GridItem>\r\n\r\n      <GridItem>\r\n        Periods to avoid\r\n        <WeekInput />\r\n      </GridItem>\r\n\r\n      <GridItem>\r\n        <MaxPeriodsInput />\r\n      </GridItem>\r\n\r\n      <GridItem>\r\n        <MinPeriodsInput />\r\n      </GridItem>\r\n\r\n      <GridItem>\r\n        <MaxBreaksInput />\r\n      </GridItem>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Subject } from 'types/Subject';\r\nimport { Week } from 'types/Week';\r\nimport { Timetable } from 'types/Timetable';\r\nimport { Class } from 'types/Class';\r\n\r\ntype Props = {\r\n  subjects: Subject[];\r\n  selectedTeachers: string[];\r\n  week: Week;\r\n  maxBreaks: number;\r\n  maxPeriods: number;\r\n  minPeriods: number;\r\n};\r\n\r\nexport default function ({\r\n  subjects,\r\n  selectedTeachers,\r\n  week,\r\n  maxBreaks,\r\n  maxPeriods,\r\n  minPeriods,\r\n}: Props): Timetable[] {\r\n  // All timetables built\r\n  const timetables: Timetable[] = [];\r\n\r\n  // Week to checking period availability\r\n  const myWeek = JSON.parse(JSON.stringify(week));\r\n\r\n  // Timetable object to build\r\n  const timetable: Timetable = [];\r\n\r\n  // Check if class is available\r\n  function classAvailable({ sessions }: Class) {\r\n    for (const { day, start, length, teacher } of sessions) {\r\n      if (selectedTeachers.includes(teacher)) {\r\n        return false;\r\n      }\r\n\r\n      for (let i = start; i < start + length; i++) {\r\n        if (myWeek[i - 1][day - 2] !== 0) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  // Push/pop class in week\r\n  function checkClassWeek({ sessions }: Class, value: 0 | 2) {\r\n    for (const { day, start, length } of sessions) {\r\n      for (let i = start; i < start + length; i++) {\r\n        myWeek[i - 1][day - 2] = value;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Push class to timetable and week\r\n  function pushClass(clazz: Class, { subjectId, subjectName }: Subject) {\r\n    timetable.push({\r\n      subjectId,\r\n      subjectName,\r\n      ...clazz,\r\n    });\r\n\r\n    checkClassWeek(clazz, 2);\r\n  }\r\n\r\n  // Pop class from timetable and week\r\n  function popClass() {\r\n    const clazz = timetable.pop() as Class;\r\n    checkClassWeek(clazz, 0);\r\n  }\r\n\r\n  function isGood() {\r\n    // Days\r\n    for (let day = 0; day < 6; day++) {\r\n      // Total study periods of this day\r\n      let periods = 0;\r\n\r\n      // Total breaks of this day\r\n      let breaks = 0;\r\n\r\n      // Mark the previous study period\r\n      let previous = -1;\r\n\r\n      // Periods\r\n      for (let period = 0; period < 13; period++) {\r\n        // If this period is used for study\r\n        if (myWeek[period][day] === 2) {\r\n          // Increase the number of study periods\r\n          periods++;\r\n\r\n          // Check breaks\r\n          if (periods > 1) {\r\n            breaks = Math.max(period - previous - 1, breaks);\r\n          }\r\n\r\n          // This study period is \"previous\" for the next study period\r\n          previous = period;\r\n        }\r\n      }\r\n\r\n      if (\r\n        breaks > maxBreaks ||\r\n        (periods > 0 && (periods < minPeriods || periods > maxPeriods))\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  function backtrack(i: number) {\r\n    if (i === subjects.length) {\r\n      if (isGood()) {\r\n        timetables.push(JSON.parse(JSON.stringify(timetable)));\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    for (const clazz of subjects[i].classes) {\r\n      if (classAvailable(clazz)) {\r\n        pushClass(clazz, subjects[i]);\r\n\r\n        backtrack(i + 1);\r\n\r\n        popClass();\r\n      }\r\n    }\r\n  }\r\n\r\n  backtrack(0);\r\n\r\n  return timetables;\r\n}\r\n","import { useWorker, WORKER_STATUS } from '@koale/useworker';\r\nimport { Button, CircularProgress } from '@material-ui/core';\r\nimport { useData } from 'contexts/Data';\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\nimport timetableBuilder from 'workers/timetableBuilder';\r\n\r\nconst LoadingWrapper = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst LoadingIcon = styled(CircularProgress).attrs(props => ({\r\n  halfsize: (props.size as number) / 2,\r\n}))`\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-top: -${props => props.halfsize}px;\r\n  margin-left: -${props => props.halfsize}px;\r\n`;\r\n\r\ntype Props = {\r\n  closeDialog: () => void;\r\n};\r\n\r\nexport default function ({ closeDialog }: Props) {\r\n  const {\r\n    subjects,\r\n    selectedTeachers,\r\n    week,\r\n    maxBreaks,\r\n    maxPeriods,\r\n    minPeriods,\r\n    setTimetables,\r\n  } = useData();\r\n\r\n  const [buildTimetables, { status }] = useWorker(timetableBuilder);\r\n\r\n  async function handleSubmit() {\r\n    const timetables = await buildTimetables({\r\n      subjects,\r\n      selectedTeachers,\r\n      week,\r\n      maxBreaks,\r\n      maxPeriods,\r\n      minPeriods,\r\n    });\r\n\r\n    console.log('Timetables:', timetables);\r\n\r\n    setTimetables(timetables);\r\n\r\n    closeDialog();\r\n  }\r\n\r\n  return (\r\n    <LoadingWrapper>\r\n      <Button\r\n        color=\"primary\"\r\n        disabled={status === WORKER_STATUS.RUNNING}\r\n        onClick={handleSubmit}\r\n      >\r\n        Build timetables\r\n      </Button>\r\n      {status === WORKER_STATUS.RUNNING && <LoadingIcon size={24} />}\r\n    </LoadingWrapper>\r\n  );\r\n}\r\n","import { createMuiTheme, IconButton, Typography } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\n\r\ntype Props = {\r\n  closeDialog: () => void;\r\n};\r\n\r\nconst theme = createMuiTheme();\r\n\r\nconst CloseButton = styled(IconButton)`\r\n  position: absolute;\r\n  right: ${theme.spacing(1)}px;\r\n  top: ${theme.spacing(1)}px;\r\n  color: ${theme.palette.grey[500]};\r\n`;\r\n\r\nexport default function ({ closeDialog }: Props) {\r\n  return (\r\n    <React.Fragment>\r\n      <Typography variant=\"h6\">Input</Typography>\r\n      <CloseButton onClick={closeDialog}>\r\n        <CloseIcon />\r\n      </CloseButton>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n} from '@material-ui/core';\r\nimport DataInputForm from 'components/DataInput/Form';\r\nimport React, { useState } from 'react';\r\nimport SubmitButton from './SubmitButton';\r\nimport Title from './Title';\r\n\r\nexport default function () {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  function openDialog() {\r\n    setOpen(true);\r\n  }\r\n\r\n  function closeDialog() {\r\n    setOpen(false);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Button color=\"primary\" variant=\"contained\" onClick={openDialog}>\r\n        Open dialog\r\n      </Button>\r\n\r\n      <Dialog open={open} scroll=\"body\" onClose={closeDialog}>\r\n        <DialogTitle disableTypography>\r\n          <Title closeDialog={closeDialog} />\r\n        </DialogTitle>\r\n\r\n        <DialogContent dividers>\r\n          <DataInputForm />\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <SubmitButton closeDialog={closeDialog} />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useData } from 'contexts/Data';\r\n\r\nconst Table = styled.table`\r\n  border: 1px solid black;\r\n  border-collapse: collapse;\r\n  table-layout: fixed;\r\n  user-select: none;\r\n`;\r\n\r\nconst Cell = styled.td`\r\n  width: 144px;\r\n  height: 40px;\r\n  border: 1px solid black;\r\n  vertical-align: top;\r\n  padding: 9px;\r\n`;\r\n\r\ntype Props = {\r\n  index: number;\r\n};\r\n\r\ntype SessionData = {\r\n  length: number;\r\n  subjectId: string;\r\n  subjectName: string;\r\n  group: string;\r\n};\r\n\r\ntype CellData = (string | null | SessionData)[][];\r\n\r\nconst initialData = (index: number): CellData =>\r\n  [...Array(14)].map((_, period) =>\r\n    [...Array(7)].map((_, day) =>\r\n      !period && day\r\n        ? 'Thứ ' + (day + 1)\r\n        : period && !day\r\n        ? 'Tiết ' + period\r\n        : !period && !day\r\n        ? '' + (index + 1)\r\n        : ''\r\n    )\r\n  );\r\n\r\nexport default function ({ index }: Props) {\r\n  const [cellData, setCellData] = useState<CellData>(initialData(index));\r\n\r\n  const { timetables } = useData();\r\n\r\n  useEffect(() => {\r\n    const newCells = initialData(index);\r\n\r\n    timetables[index]?.forEach(\r\n      ({ subjectId, subjectName, group, sessions }) => {\r\n        sessions.forEach(({ day, start, length }) => {\r\n          // Cell span\r\n          newCells[start][day - 1] = {\r\n            length,\r\n            subjectId,\r\n            subjectName,\r\n            group,\r\n          };\r\n\r\n          // Delete other cells\r\n          for (let i = 1; i < length; i++) {\r\n            newCells[start + i][day - 1] = null;\r\n          }\r\n        });\r\n      }\r\n    );\r\n\r\n    setCellData(newCells);\r\n  }, [index, timetables]);\r\n\r\n  return (\r\n    <Table>\r\n      <tbody>\r\n        {cellData.map((row, i) => (\r\n          <tr key={i}>\r\n            {row.map(\r\n              (data, j) =>\r\n                data !== null &&\r\n                (typeof data === 'object' ? (\r\n                  <Cell key={j} rowSpan={data.length}>\r\n                    {data.subjectId}\r\n                    <br />\r\n                    {data.subjectName}\r\n                    <br />\r\n                    {'Nhóm ' + data.group}\r\n                  </Cell>\r\n                ) : (\r\n                  <Cell key={j}>{data}</Cell>\r\n                ))\r\n            )}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </Table>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Timetable from './Timetable';\r\nimport styled from 'styled-components';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport { useData } from 'contexts/Data';\r\n\r\nconst PrevIcon = styled(ChevronLeftIcon)`\r\n  font-size: 60px;\r\n`;\r\n\r\nconst NextIcon = styled(ChevronRightIcon)`\r\n  font-size: 60px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  width: 100%;\r\n  align-items: center;\r\n`;\r\n\r\nexport default function () {\r\n  const [index, setIndex] = useState(0);\r\n\r\n  const { timetables } = useData();\r\n\r\n  useEffect(() => {\r\n    setIndex(0);\r\n  }, [timetables]);\r\n\r\n  return (\r\n    <Container>\r\n      <IconButton\r\n        color=\"primary\"\r\n        disabled={!index}\r\n        onClick={() => setIndex(index - 1)}\r\n      >\r\n        <PrevIcon />\r\n      </IconButton>\r\n\r\n      <Timetable index={index} />\r\n\r\n      <IconButton\r\n        color=\"primary\"\r\n        disabled={!timetables.length || index === timetables.length - 1}\r\n        onClick={() => setIndex(index + 1)}\r\n      >\r\n        <NextIcon />\r\n      </IconButton>\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport DataInput from 'components/DataInput/';\r\nimport { DataProvider } from 'contexts/Data';\r\nimport Timetables from 'components/Timetables';\r\nimport styled from 'styled-components';\r\n\r\nconst Centered = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  height: 100vh;\r\n  justify-content: space-evenly;\r\n`;\r\n\r\nexport default function () {\r\n  return (\r\n    <DataProvider>\r\n      <Centered>\r\n        <DataInput />\r\n        <Timetables />\r\n      </Centered>\r\n    </DataProvider>\r\n  );\r\n}\r\n","import './wdyr';\n\nimport { CssBaseline } from '@material-ui/core';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'typeface-roboto';\n\nimport App from 'components/App';\n\nReactDOM.render(\n  <React.Fragment>\n    <CssBaseline />\n    <App />\n  </React.Fragment>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}