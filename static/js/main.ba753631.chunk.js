(this.webpackJsonptimetabler=this.webpackJsonptimetabler||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(44);"development"===n.n(c).a.env.NODE_ENV&&r.a.lazy((function(){return n.e(2).then(n.t.bind(null,313,7))}))(r.a,{trackAllPureComponents:!0});var l=n(159),u=n(13),i=n.n(u),o=(n(94),n(11)),s=n(10),f=n(153),m=n(164),d=n(156),b=n(157),p=n(158),v=n(79),j=n(12),E=n(160),O=n(17),h=Object(a.createContext)(void 0);function y(e){var t=e.children,n=Object(a.useState)([]),c=Object(s.a)(n,2),l=c[0],u=c[1],i=Object(a.useState)(Object(O.a)(Array(13)).map((function(){return Array(6).fill(0)}))),o=Object(s.a)(i,2),f=o[0],m=o[1],d=Object(a.useState)([]),b=Object(s.a)(d,2),p=b[0],v=b[1],j=Object(a.useState)([]),E=Object(s.a)(j,2),y=E[0],g=E[1],x=Object(a.useState)(13),k=Object(s.a)(x,2),S=k[0],w=k[1],T=Object(a.useState)(0),P=Object(s.a)(T,2),A=P[0],C=P[1],M=Object(a.useState)(0),z=Object(s.a)(M,2),I=z[0],N=z[1],W=Object(a.useState)([]),B=Object(s.a)(W,2),D=B[0],F=B[1];return r.a.createElement(h.Provider,{value:{subjects:l,week:f,allTeachers:p,maxPeriods:S,minPeriods:A,maxBreaks:I,selectedTeachers:y,timetables:D,setSubjects:u,setWeek:m,setAllTeachers:v,setMaxPeriods:w,setMinPeriods:C,setMaxBreaks:N,setSelectedTeachers:g,setTimetables:F}},t)}var g=function(){return Object(a.useContext)(h)},x=function(){var e=g(),t=e.maxBreaks,n=e.setMaxBreaks;return r.a.createElement(E.a,{fullWidth:!0,inputProps:{min:0,max:11},label:"Max breaks",type:"number",value:t,variant:"outlined",onChange:function(e){n(+e.target.value)}})},k={min:0,max:13},S=function(){var e=g(),t=e.minPeriods,n=e.maxPeriods,a=e.setMaxPeriods;var c=n<t?"Max periods must be bigger than or equal to Min periods":"";return r.a.createElement(E.a,{fullWidth:!0,error:n<t,helperText:c,inputProps:k,label:"Max periods per day",type:"number",value:n,variant:"outlined",onChange:function(e){a(+e.target.value)}})},w={min:0,max:13};function T(){var e=g(),t=e.maxPeriods,n=e.minPeriods,a=e.setMinPeriods;var c=t<n?"Min periods must be smaller than or equal to Max periods":"";return r.a.createElement(E.a,{fullWidth:!0,error:t<n,helperText:c,inputProps:w,label:"Min periods per day",type:"number",value:n,variant:"outlined",onChange:function(e){a(+e.target.value)}})}var P=n(37);function A(e){return"number"===typeof e}function C(e){return"string"===typeof e}function M(e){var t=e,n=t.day,a=t.start,r=t.length,c=t.room,l=t.teacher;return A(n)&&A(a)&&A(r)&&C(c)&&C(l)}function z(e){var t=e,n=t.group,a=t.max,r=t.empty,c=t.sessions;return C(n)&&A(a)&&A(r)&&function(e){if(!Array.isArray(e))return!1;var t,n=Object(P.a)(e);try{for(n.s();!(t=n.n()).done;){if(!M(t.value))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}(c)}function I(e){var t=e,n=t.subjectId,a=t.subjectName,r=t.credits,c=t.classes;return C(n)&&C(a)&&A(r)&&function(e){if(!Array.isArray(e))return!1;var t,n=Object(P.a)(e);try{for(n.s();!(t=n.n()).done;){if(!z(t.value))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}(c)}var N=n(80),W=Object(N.a)(new function(){return new Worker(n.p+"static/js/myWorker.worker.e33627e9.worker.js")}),B=r.a.createContext(W),D=function(){return Object(a.useContext)(B)},F=function(){var e=g().setSubjects,t=D().getTeachers,n=g().setAllTeachers;function a(a){var r;if(null===(r=a.target)||void 0===r?void 0:r.result){var c=JSON.parse(a.target.result);!function(e){if(!Array.isArray(e))return!1;var t,n=Object(P.a)(e);try{for(n.s();!(t=n.n()).done;){if(!I(t.value))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}(c)?console.log("Invalid file data."):(console.log(c),e(c),t(c).then(n))}}return r.a.createElement(f.a,{component:"label",variant:"outlined"},"Input subjects",r.a.createElement("input",{hidden:!0,accept:".json",type:"file",value:void 0,onChange:function(e){if(e.target.files){var t=e.target.files[0];if(t.type.endsWith("json")){var n=new FileReader;n.onload=a,n.readAsText(t),e.target.value=""}}}}))},J=n(163),q=n(69),R=n.n(q),V=n(68),_=n.n(V),G=n(161);function H(){var e=Object(o.a)(["\n  margin-right: 8px;\n"]);return H=function(){return e},e}var K=function(e){return r.a.createElement(E.a,Object.assign({},e,{label:"Teachers to avoid",variant:"outlined"}))},L=r.a.createElement(_.a,{fontSize:"small"}),Q=r.a.createElement(R.a,{fontSize:"small"}),U=Object(j.a)(J.a)(H()),X=function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{checked:t.selected,checkedIcon:Q,icon:L}),e)},Y=function(){var e=g(),t=e.allTeachers,n=e.selectedTeachers,a=e.setSelectedTeachers;return r.a.createElement(G.a,{disableCloseOnSelect:!0,fullWidth:!0,multiple:!0,id:"teachers-select",noOptionsText:"Subjects input required",options:t,renderInput:K,renderOption:X,value:n,onChange:function(e,t){a(t)}})},Z=n(74),$=n.n(Z);function ee(){var e=Object(o.a)(["\n  height: ","px !important;\n"]);return ee=function(){return e},e}function te(){var e=Object(o.a)(["\n  width: ","px;\n  height: ","px;\n  display: flex;\n  border: solid black;\n  border-width: 0 1px 1px 0;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  text-align: center;\n"]);return te=function(){return e},e}function ne(){var e=Object(o.a)(["\n  display: flex;\n"]);return ne=function(){return e},e}function ae(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  border: solid black;\n  border-width: 1px 0 0 1px;\n  width: fit-content;\n"]);return ae=function(){return e},e}var re=j.a.div(ae()),ce=j.a.div(ne()),le=j.a.div(te(),48,48),ue=Object(j.a)($.a)(ee(),336),ie=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(1),u=Object(s.a)(l,2),i=u[0],o=u[1],f=g(),m=f.week,d=f.setWeek;function b(e,t,n){var a=JSON.parse(JSON.stringify(m));a[e][t]=n,d(a)}return Object(a.useEffect)((function(){return document.body.onmousedown=function(){return c(!0)},document.body.onmouseup=function(){return c(!1)},function(){document.body.onmousedown=null,document.body.onmouseup=null}}),[]),r.a.createElement(re,null,r.a.createElement(ce,null,r.a.createElement(le,null),Object(O.a)(Array(6)).map((function(e,t){return r.a.createElement(le,{key:t},"Th\u1ee9 ",r.a.createElement("br",null)," ",t+2)}))),r.a.createElement(ue,null,Object(O.a)(Array(13)).map((function(e,t){return r.a.createElement(ce,{key:t},r.a.createElement(le,null,"Ti\u1ebft ",r.a.createElement("br",null)," ",t+1),Object(O.a)(Array(6)).map((function(e,a){return r.a.createElement(le,{key:a,onMouseDown:function(){return function(e,t){var n=1-m[e][t];o(n),b(e,t,n)}(t,a)},onMouseOver:function(){return e=t,r=a,void(n&&b(e,r,i));var e,r}},!!m[t][a]&&"\u274c")})))}))))};function oe(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: ","px;\n"]);return oe=function(){return e},e}function se(){var e=Object(o.a)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  row-gap: ","px;\n"]);return se=function(){return e},e}var fe=Object(v.a)(),me=j.a.div(se(),fe.spacing(3)),de=j.a.div(oe(),337),be=function(){return r.a.createElement(me,null,r.a.createElement(de,null,r.a.createElement(F,null)),r.a.createElement(de,null,r.a.createElement(Y,null)),r.a.createElement(de,null,"Periods to avoid",r.a.createElement(ie,null)),r.a.createElement(de,null,r.a.createElement(S,null)),r.a.createElement(de,null,r.a.createElement(T,null)),r.a.createElement(de,null,r.a.createElement(x,null)))},pe=n(52),ve=n.n(pe),je=n(75),Ee=n(155);function Oe(){var e=Object(o.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -","px;\n  margin-left: -","px;\n"]);return Oe=function(){return e},e}function he(){var e=Object(o.a)(["\n  position: relative;\n"]);return he=function(){return e},e}var ye=j.a.div(he()),ge=Object(j.a)(Ee.a).attrs((function(e){return{halfsize:e.size/2}}))(Oe(),(function(e){return e.halfsize}),(function(e){return e.halfsize})),xe=function(e){var t=e.closeDialog,n=D().buildTimetables,c=g(),l=c.subjects,u=c.selectedTeachers,i=c.week,o=c.maxBreaks,m=c.maxPeriods,d=c.minPeriods,b=c.setTimetables,p=Object(a.useState)(!1),v=Object(s.a)(p,2),j=v[0],E=v[1];function O(){return(O=Object(je.a)(ve.a.mark((function e(){var a;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,n(l,u,i,o,m,d);case 3:a=e.sent,console.log("Timetables:",a),E(!1),b(a),t();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(ye,null,r.a.createElement(f.a,{color:"primary",disabled:j,onClick:function(){return O.apply(this,arguments)}},"Build timetables"),j&&r.a.createElement(ge,{size:24}))},ke=n(154),Se=n(116),we=n(76),Te=n.n(we);function Pe(){var e=Object(o.a)(["\n  position: absolute;\n  right: ","px;\n  top: ","px;\n  color: ",";\n"]);return Pe=function(){return e},e}var Ae=Object(v.a)(),Ce=Object(j.a)(ke.a)(Pe(),Ae.spacing(1),Ae.spacing(1),Ae.palette.grey[500]),Me=function(e){var t=e.closeDialog;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{variant:"h6"},"Input"),r.a.createElement(Ce,{onClick:t},r.a.createElement(Te.a,null)))},ze=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1];function l(){c(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{color:"primary",variant:"contained",onClick:function(){c(!0)}},"Open dialog"),r.a.createElement(m.a,{open:n,scroll:"body",onClose:l},r.a.createElement(d.a,{disableTypography:!0},r.a.createElement(Me,{closeDialog:l})),r.a.createElement(b.a,{dividers:!0},r.a.createElement(be,null)),r.a.createElement(p.a,null,r.a.createElement(xe,{closeDialog:l}))))};function Ie(){var e=Object(o.a)(["\n  width: 144px;\n  height: 40px;\n  border: 1px solid black;\n  vertical-align: top;\n  padding: 9px;\n"]);return Ie=function(){return e},e}function Ne(){var e=Object(o.a)(["\n  border: 1px solid black;\n  border-collapse: collapse;\n  table-layout: fixed;\n  user-select: none;\n"]);return Ne=function(){return e},e}var We=j.a.table(Ne()),Be=j.a.td(Ie()),De=function(e){return Object(O.a)(Array(14)).map((function(t,n){return Object(O.a)(Array(7)).map((function(t,a){return!n&&a?"Th\u1ee9 "+(a+1):n&&!a?"Ti\u1ebft "+n:n||a?"":""+(e+1)}))}))},Fe=function(e){var t=e.index,n=Object(a.useState)(De(t)),c=Object(s.a)(n,2),l=c[0],u=c[1],i=g().timetables;return Object(a.useEffect)((function(){var e,n=De(t);null===(e=i[t])||void 0===e||e.forEach((function(e){var t=e.subjectId,a=e.subjectName,r=e.group;e.sessions.forEach((function(e){var c=e.day,l=e.start,u=e.length;n[l][c-1]={length:u,subjectId:t,subjectName:a,group:r};for(var i=1;i<u;i++)n[l+i][c-1]=null}))})),u(n)}),[t,i]),r.a.createElement(We,null,r.a.createElement("tbody",null,l.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e,t){return null!==e&&("object"===typeof e?r.a.createElement(Be,{key:t,rowSpan:e.length},e.subjectId,r.a.createElement("br",null),e.subjectName,r.a.createElement("br",null),"Nh\xf3m "+e.group):r.a.createElement(Be,{key:t},e))})))}))))},Je=n(77),qe=n.n(Je),Re=n(78),Ve=n.n(Re);function _e(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: space-evenly;\n  width: 100%;\n  align-items: center;\n"]);return _e=function(){return e},e}function Ge(){var e=Object(o.a)(["\n  font-size: 60px;\n"]);return Ge=function(){return e},e}function He(){var e=Object(o.a)(["\n  font-size: 60px;\n"]);return He=function(){return e},e}var Ke=Object(j.a)(qe.a)(He()),Le=Object(j.a)(Ve.a)(Ge()),Qe=j.a.div(_e()),Ue=function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],c=t[1],l=g().timetables;return Object(a.useEffect)((function(){c(0)}),[l]),r.a.createElement(Qe,null,r.a.createElement(ke.a,{color:"primary",disabled:!n,onClick:function(){return c(n-1)}},r.a.createElement(Ke,null)),r.a.createElement(Fe,{index:n}),r.a.createElement(ke.a,{color:"primary",disabled:!l.length||n===l.length-1,onClick:function(){return c(n+1)}},r.a.createElement(Le,null)))};function Xe(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100vh;\n  justify-content: space-evenly;\n"]);return Xe=function(){return e},e}var Ye=j.a.div(Xe()),Ze=function(){return r.a.createElement(y,null,r.a.createElement(Ye,null,r.a.createElement(ze,null),r.a.createElement(Ue,null)))};i.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null),r.a.createElement(Ze,null)),document.getElementById("root"))},89:function(e,t,n){e.exports=n(115)}},[[89,1,3]]]);
//# sourceMappingURL=main.ba753631.chunk.js.map